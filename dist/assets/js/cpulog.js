const logContainer=document.getElementById("log-container");logContainer.classList.add("w-full","mt-4"),logContainer.style.display="flex",logContainer.style.flexWrap="wrap",logContainer.style.justifyContent="space-between";let cpuChartInstance=null,memoryChartInstance=null,diskChartInstance=null,networkChartInstance=null;function createChart(t,a,e,n,s,r=!1){const o=document.createElement("div");o.id=t,o.className="normal-ddd-border bg-white rounded-lg",o.style.flex=r?"1 1 100%":"1 1 calc(33.3333% - 10px)",o.style.maxWidth=r?"100%":"calc(33.3333% - 10px)",o.style.margin="10px 0",o.style.position="relative";const l=document.createElement("canvas");l.id=a,l.style.width="100%",l.style.height="350px",o.appendChild(l),logContainer.appendChild(o);const c=l.getContext("2d");return new Chart(c,{type:"line",data:{labels:Array.from({length:24},((t,a)=>`${a}:00`)),datasets:[{label:e,data:Array.from({length:24},(()=>Math.floor(100*Math.random()))),borderColor:n,backgroundColor:`${n}50`,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:s}},scales:{x:{title:{display:!0,text:"시간 (24시간 형식)"}},y:{beginAtZero:!0,max:100,title:{display:!0,text:e}}}}})}function createVisualizationPanels(){cpuChartInstance=createChart("cpu-panel","cpuChart","CPU 사용량 (%)","#36a2eb","24시간 CPU 사용량 시각화"),memoryChartInstance=createChart("memory-panel","memoryChart","Memory 사용량 (%)","#ff6384","24시간 Memory 사용량 시각화"),diskChartInstance=createChart("disk-panel","diskChart","Disk 사용량 (%)","#4bc0c0","24시간 Disk 사용량 시각화"),networkChartInstance=createChart("network-panel","networkChart","Network Bandwidth (Mbps)","#ff9f40","네트워크 대역폭 추이",!0)}async function fetchSystemLogs(){try{const t=await fetch("assets/mock/cpulog.json"),a=await t.json(),e=a.logs.map((t=>t.timestamp)),n=a.logs.map((t=>t.cpuUsage)),s=a.logs.map((t=>t.memoryUsage)),r=a.logs.map((t=>t.diskUsage)),o=a.logs.map((t=>t.networkUsage||Math.floor(100*Math.random())));cpuChartInstance&&(cpuChartInstance.data.labels=e,cpuChartInstance.data.datasets[0].data=n,cpuChartInstance.update()),memoryChartInstance&&(memoryChartInstance.data.labels=e,memoryChartInstance.data.datasets[0].data=s,memoryChartInstance.update()),diskChartInstance&&(diskChartInstance.data.labels=e,diskChartInstance.data.datasets[0].data=r,diskChartInstance.update()),networkChartInstance&&(networkChartInstance.data.labels=e,networkChartInstance.data.datasets[0].data=o,networkChartInstance.update())}catch(t){console.error("시스템 로그 데이터를 가져오는 중 오류 발생:",t)}}function updateTrendCharts(){const t=t=>{t&&(t.data.datasets[0].data.shift(),t.data.datasets[0].data.push(Math.floor(100*Math.random())),t.update())};setInterval((()=>{t(cpuChartInstance),t(memoryChartInstance),t(diskChartInstance)}),2e3),setInterval((()=>{t(networkChartInstance)}),3e3)}function initLogVisualization(){createVisualizationPanels(),fetchSystemLogs(),updateTrendCharts()}window.addEventListener("DOMContentLoaded",initLogVisualization);