const hotelData=[{name:"Hotel A",address:"123 Seoul St.",phone:"010-1234-5678",region:"Seoul"},{name:"Hotel B",address:"124 Busan St.",phone:"010-1234-5679",region:"Busan"},{name:"Hotel C",address:"125 Daegu St.",phone:"010-1234-5680",region:"Daegu"},{name:"Hotel D",address:"126 Incheon St.",phone:"010-1234-5681",region:"Incheon"},{name:"Hotel E",address:"127 Gwangju St.",phone:"010-1234-5682",region:"Gwangju"},{name:"Hotel F",address:"128 Daejeon St.",phone:"010-1234-5683",region:"Daejeon"},{name:"Hotel G",address:"129 Ulsan St.",phone:"010-1234-5684",region:"Ulsan"},{name:"Hotel H",address:"130 Sejong St.",phone:"010-1234-5685",region:"Sejong"},{name:"Hotel I",address:"131 Gyeonggi St.",phone:"010-1234-5686",region:"Gyeonggi"},{name:"Hotel J",address:"132 Gangwon St.",phone:"010-1234-5687",region:"Gangwon"},{name:"Hotel K",address:"133 Chungbuk St.",phone:"010-1234-5688",region:"Chungbuk"},{name:"Hotel L",address:"134 Chungnam St.",phone:"010-1234-5689",region:"Chungnam"},{name:"Hotel M",address:"135 Jeonbuk St.",phone:"010-1234-5690",region:"Jeonbuk"},{name:"Hotel N",address:"136 Jeonnam St.",phone:"010-1234-5691",region:"Jeonnam"},{name:"Hotel O",address:"137 Gyeongbuk St.",phone:"010-1234-5692",region:"Gyeongbuk"},{name:"Hotel P",address:"138 Gyeongnam St.",phone:"010-1234-5693",region:"Gyeongnam"},{name:"Hotel Q",address:"139 Jeju St.",phone:"010-1234-5694",region:"Jeju"},{name:"Hotel BC",address:"177 Gyeongnam St.",phone:"010-1234-5732",region:"Gyeongnam"}];function saveDataToLocalStorage(e){localStorage.setItem("hotelData",JSON.stringify(e))}function saveHistoryToLocalStorage(e){const t=localStorage.getItem("historyData"),o=t?JSON.parse(t):[];o.push(e),localStorage.setItem("historyData",JSON.stringify(o))}function loadDataFromLocalStorage(){const e=localStorage.getItem("hotelData");return e?JSON.parse(e):hotelData}function loadHistoryFromLocalStorage(){const e=localStorage.getItem("historyData");return e?JSON.parse(e):[]}function saveColumnOrder(){if(!gridOptions.api)return;const e=gridOptions.api.getColumnState();localStorage.setItem("columnOrder",JSON.stringify(e))}function loadColumnOrder(){const e=localStorage.getItem("columnOrder");return e?JSON.parse(e):null}createModal3("tmpModal","수정 이력",'<div id="historyModal" class="rounded">\n            <pre id="historyContent"></pre>\n            <button id="closeHistoryBtn" class="bg-gray-500 text-white mt-2">닫기</button>\n        </div>',[]),hotelData.forEach(((e,t)=>{e.id=generateNanoId(),e.rowNo=t+1,e.visitors=Array.from({length:12},(()=>Math.floor(101*Math.random())+100))}));const columnDefs=[{headerName:"Row No",field:"rowNo",cellClass:"custom-cell",headerClass:"custom-header",editable:!1,flex:.5},{headerName:"UUID",field:"id",cellClass:"custom-cell",headerClass:"custom-header",editable:!1,flex:1},{headerName:"Region",field:"region",cellClass:"custom-cell",headerClass:"custom-header",editable:!0,flex:1,cellEditor:"agSelectCellEditor",cellEditorParams:{values:["Seoul","Busan","Daegu","Incheon","Gwangju","Daejeon","Ulsan","Sejong","Gyeonggi","Gangwon","Chungbuk","Chungnam","Jeonbuk","Jeonnam","Gyeongbuk","Gyeongnam","Jeju"]}},{headerName:"Name",field:"name",cellClass:"custom-cell",headerClass:"custom-header",editable:!0,flex:1},{headerName:"Address",field:"address",cellClass:"custom-cell",headerClass:"custom-header",editable:!0,flex:1},{headerName:"Phone",field:"phone",cellClass:"custom-cell",headerClass:"custom-header",editable:!0,flex:1},{headerName:"Actions",field:"actions",headerClass:"custom-header",cellRenderer:function(e){const t=document.createElement("button");return t.textContent="수정 이력 보기",t.className="history-button",t.addEventListener("click",(function(){const t=loadHistoryFromLocalStorage().filter((t=>t.id===e.data.id));document.getElementById("historyContent").textContent=JSON.stringify(t,null,2),document.getElementById("tmpModal").style.display="block",document.getElementById("historyModal").style.display="block"})),t},flex:1}],gridOptions={columnDefs:columnDefs,rowData:loadDataFromLocalStorage(),rowClass:"custom-row",defaultColDef:{sortable:!0,filter:!0,resizable:!0,flex:1,editable:!0},pagination:!0,paginationPageSize:10,paginationPageSizeSelector:[10,20,50,100],animateRows:!0,getDataPath:function(e){return[e.region,e.name]},autoGroupColumnDef:{headerName:"Region",cellRendererParams:{suppressCount:!0}},icons:{sortAscending:'<i class="fas fa-sort-up"></i>',sortDescending:'<i class="fas fa-sort-down"></i>',filter:'<i class="fas fa-filter"></i>',groupExpanded:'<i class="fas fa-minus-square"></i>',groupContracted:'<i class="fas fa-plus-square"></i>'},onCellValueChanged:function(e){const t=[];e.api.forEachNode((function(e){t.push(e.data)})),saveDataToLocalStorage(t);saveHistoryToLocalStorage({timestamp:(new Date).toISOString(),originalValue:e.oldValue,newValue:e.newValue,field:e.colDef.field,id:e.data.id})},onColumnMoved:function(e){if(!e.api)return;const t=e.api.getColumnState();localStorage.setItem("columnOrder",JSON.stringify(t))},onGridReady:function(e){const t=loadColumnOrder();t&&e.api.applyColumnState({state:t,applyOrder:!0}),setTimeout((()=>e.api.sizeColumnsToFit()),100)},rowHeight:40,headerHeight:40,onRowClicked:onRowClicked};document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#myGrid");e.classList.add("custom-grid"),new agGrid.createGrid(e,gridOptions),saveDataToLocalStorage(gridOptions.rowData),document.getElementById("closeHistoryBtn").addEventListener("click",(function(){document.getElementById("tmpModal").style.display="none",document.getElementById("historyModal").style.display="none"}))}));const lineChartOptions={series:[{name:"Visitors",data:[]}],chart:{height:350,type:"line"},stroke:{curve:"smooth"},title:{text:"Monthly Visitors"},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},pieChartOptions={series:[],chart:{height:350,type:"pie"},labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],title:{text:"Visitors Distribution"}},lineChart=new ApexCharts(document.querySelector("#lineChart"),lineChartOptions);lineChart.render();const pieChart=new ApexCharts(document.querySelector("#pieChart"),pieChartOptions);function onRowClicked(e){const t=e.data.visitors;t&&(lineChart.updateSeries([{name:"Visitors",data:t}]),pieChart.updateSeries(t))}pieChart.render();