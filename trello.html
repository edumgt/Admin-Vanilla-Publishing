<!DOCTYPE html>
<html>

<head>
    <link href="assets/css/trello.css" rel="stylesheet">
    <style>
        #app {
            display: flex;
            height: 100vh;
        }

        #taskArea {
            flex: 1;
            padding: 20px;
            background-color: #ffffff;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin: 20px 5px 20px 20px;
        }

        #ganttArea {
            flex: 2;
            padding: 20px;
            background-color: #e9ecef;
            overflow-y: auto;
            border-radius: 10px;
            margin: 20px 20px 20px 5px;
        }

        #splitter {

            width: 5px;
            background-color: #ddd;
            overflow-y: auto;
            cursor: col-resize;
            margin: 20px 5px 20px 5px;
            /* z-index: 100; */
        }




        .task-list li {
            list-style: none;
            background: white;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .gantt-table {
            width: 100%;
            border-collapse: collapse;
        }

        .gantt-table th,
        .gantt-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .gantt-table th {
            background-color: #f2f2f2;
        }

        .timeline {
            display: flex;
        }

        .timeline div {
            width: 24px;
            height: 24px;
            margin-right: 2px;
            border: 1px solid #ddd;
        }

        .timeline .highlight {
            background-color: #4299e1;
        }


        #taskForm input[type="text"],
        #taskForm textarea,
        #taskForm input[type="date"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s ease-in-out;
        }

        #taskForm input[type="text"]:focus,
        #taskForm textarea:focus,
        #taskForm input[type="date"]:focus {
            border-color: #4299e1;
        }



        #taskForm button {
            display: inline-block;
            padding: 10px 20px;
            background-color: #4299e1;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }

        #taskForm button:hover {
            background-color: #2b6cb0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }


        #taskForm {
            margin-bottom: 20px;
        }
    </style>

</head>

<body>
    <div class="gnb-menu bg-gray-900 fixed top-0 left-0 bottom-0 w-full z-50 shadow-md">
        <ul class="flex justify-between items-center">
            <div id="logo"></div>
            <div class="tabs flex">

                <li>
                    <a href="system.html" class="gnb-item tab-link block flex items-center space-x-2">
                        <i class="fas fa-cogs"></i>
                        <span>시스템관리</span>
                    </a>
                </li>

                <li>
                    <a href="#" class="gnb-item tab-link block flex items-center space-x-2">
                        <i class="fas fa-users"></i>
                        <span>조직관리</span>
                    </a>
                </li>
                <!-- 업무관리 -->
                <li>
                    <a href="#" class="gnb-item tab-link block flex items-center space-x-2">
                        <i class="fas fa-briefcase"></i>
                        <span>업무관리</span>
                    </a>
                </li>
                <!-- 일정관리 -->
                <li>
                    <a href="calendar.html" class="gnb-item tab-link block flex items-center space-x-2">
                        <i class="fas fa-calendar-alt"></i>
                        <span>일정관리</span>
                    </a>
                </li>
                <!-- 통계 -->
                <li>
                    <a href="stati.html" class="gnb-item tab-link block flex items-center space-x-2">
                        <i class="fas fa-chart-bar"></i>
                        <span>통계</span>
                    </a>
                </li>
                <!-- 설정관리 -->
                <li>
                    <a href="#" class="gnb-item tab-link block flex items-center space-x-2">
                        <i class="fas fa-tools"></i>
                        <span>설정관리</span>
                    </a>
                </li>
            </div>

            <!-- 멤버 아이콘 -->
            <button id="memberIcon" class="text-gray-200 hover:text-white text-2xl p-2">
                <i class="fas fa-user"></i>
            </button>
        </ul>
    </div>


    <!-- Toast Container -->
    <div id="toast-container"></div>


    <div id="offCanvas"
        class="fixed top-14 h-full bg-white text-gray-800 hidden transform -translate-x-full transition-transform duration-300 z-50 shadow-lg">
        <div class="flex flex-col h-full">
            <ul class="flex-grow p-4 space-y-4">

                <li>
                    <a href="calendar.html"
                        class="menu-item block text-gray-800 hover:text-blue-500 text-center font-medium">
                        <i class="fas fa-code menu-icon text-blue-400"></i>
                        <span class="menu-text">업무일정</span>
                    </a>
                </li>

                <li>
                    <a href="trello.html"
                        class="menu-item block text-gray-800 hover:text-blue-500 text-center font-medium">
                        <i class="fas fa-user-shield menu-icon text-blue-400"></i>
                        <span class="menu-text">프로젝트일정</span>
                    </a>
                </li>

                <li>
                    <a href="#" class="menu-item block text-gray-800 hover:text-blue-500 text-center font-medium">
                        <i class="fas fa-clipboard-list menu-icon text-blue-400"></i>
                        <span class="menu-text">생산일정</span>
                    </a>
                </li>

                <li>
                    <a href="#" class="menu-item block text-gray-800 hover:text-blue-500 text-center font-medium">
                        <i class="fas fa-bars menu-icon text-blue-400"></i>
                        <span class="menu-text">회의일정</span>
                    </a>
                </li>

                <li>
                    <a href="#" class="menu-item block text-gray-800 hover:text-blue-500 text-center font-medium">
                        <i class="fas fa-cogs menu-icon text-blue-400"></i>
                        <span class="menu-text">이벤트</span>
                    </a>
                </li>
            </ul>

            <div class="flex flex-col space-y-4 pb-4">
                <button id="expandOffCanvas" class="text-gray-800 hover:text-blue-500 text-xl">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <button id="collapseOffCanvas" class="text-gray-800 hover:text-blue-500 text-xl">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
        </div>
    </div>

    <div id="content" class="content">
        <div class="flex items-center">
            <button id="hamburgerButton" class="absolute top-20 left-5 text-gray-600 hover:text-gray-800 text-2xl ">
                <i class="fas fa-bars"></i>
            </button>

            <h2 class="breadcrumb-container">
                <nav class="breadcrumb flex items-center space-x-2 text-gray-600">
                    <a href="calendar.html" class="text-blue-500 hover:underline">일정관리</a>
                    <span>/</span>
                    <span>프로젝트일정</span>
                </nav>
            </h2>


        </div>


        <div id="app">
            <div id="taskArea">

                <form id="taskForm">
                    <label for="taskName" style="font-weight: bold; margin-bottom: 5px; display: block;">Task
                        Name</label>
                    <input type="text" id="taskName" placeholder="Enter task name" required>

                    <label for="taskDescription" style="font-weight: bold; margin-bottom: 5px; display: block;">Task
                        Description</label>
                    <textarea id="taskDescription" placeholder="Enter task description"></textarea>

                    <label for="taskDeadline" style="font-weight: bold; margin-bottom: 5px; display: block;">Task
                        Deadline</label>
                    <input type="date" id="taskDeadline" required>

                    <button type="submit">Add Task</button>
                </form>
                <ul id="taskList" class="task-list"></ul>
            </div>

            <div id="splitter"></div>

            <div id="ganttArea">
                <h2>Gantt Chart</h2>
                <table class="gantt-table">
                    <thead>
                        <tr>
                            <th>Task Name</th>
                            <th>Start Date</th>
                            <th>End Date</th>
                            <th>Timeline</th>
                        </tr>
                    </thead>
                    <tbody id="ganttTableBody"></tbody>
                </table>
            </div>
        </div>




    </div>

    <!-- Gear Icon -->
    <button id="gearIcon" class="fixed bottom-4 right-4 bg-gray-800 text-white rounded-full p-3 shadow-lg z-50">
        <i class="fas fa-globe"></i>
    </button>

    <!-- Floating Navigation Menu -->
    <div id="floatingNav"
        class="fixed bottom-4 right-4 bg-gray-800 text-white rounded-lg shadow-lg p-4 z-50 hidden space-y-4">
        <div class="flex justify-between items-center">
            <h3 class="text-white font-semibold">Language</h3>
            <button id="closeFloatingNav" class="text-white text-lg">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div id="languageSwitcher" class="flex space-x-2">
            <img src="https://upload.wikimedia.org/wikipedia/commons/a/a4/Flag_of_the_United_States.svg" alt="English"
                data-lang="en" class="w-8 h-8 cursor-pointer">
            <img src="https://upload.wikimedia.org/wikipedia/commons/0/09/Flag_of_South_Korea.svg" alt="한국어"
                data-lang="ko" class="w-8 h-8 cursor-pointer">
            <img src="https://upload.wikimedia.org/wikipedia/commons/9/9e/Flag_of_Japan.svg" alt="日本語" data-lang="ja"
                class="w-6 h-6 cursor-pointer">
        </div>

    </div>


    <div id="modal"
        class="hidden fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-lg p-6 w-1/3 relative">

            <button id="closeModalTopRight" class="absolute top-2 right-2 text-gray-600 hover:text-gray-800 text-lg">
                &times;
            </button>
            <h2 class="text-lg font-semibold mb-4">Edit Row Details</h2>
            <form id="modalForm" class="space-y-4">

            </form>
            <div class="flex justify-end space-x-2 mt-4">
                <button id="saveModal" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Save</button>
                <button id="closeModal"
                    class="bg-gray-800 text-white px-4 py-2 rounded hover:bg-gray-700">Close</button>
            </div>
        </div>
    </div>

    <div id="logoutModal"
        class="hidden fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-lg p-6 w-1/3 relative">
            <h2 class="text-lg font-semibold mb-4">로그아웃 하시겠습니까?</h2>
            <div class="flex justify-end space-x-2 mt-4">
                <button id="confirmLogout" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"
                    onclick="window.location.href='index.html';">Logout</button>
                <button id="cancelLogout"
                    class="bg-gray-800 text-white px-4 py-2 rounded hover:bg-gray-700">Cancel</button>
            </div>
        </div>
    </div>

    <div id="demoModal"
        class="hidden fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-lg p-6 w-1/3 text-center relative">
            <h2 class="text-lg font-semibold mb-4">알림</h2>
            <p>데모버젼에서는 지원하지 않습니다.</p>
            <div class="flex justify-center mt-4">
                <button id="closeDemoModal"
                    class="bg-gray-800 text-white px-4 py-2 rounded hover:bg-gray-700">닫기</button>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="assets/js/frame.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const taskForm = document.getElementById("taskForm");
            const taskList = document.getElementById("taskList");
            const ganttTableBody = document.getElementById("ganttTableBody");

            // Load tasks from localStorage
            function loadTasks() {
                return JSON.parse(localStorage.getItem("tasks")) || [];
            }

            // Save tasks to localStorage
            function saveTasks(tasks) {
                localStorage.setItem("tasks", JSON.stringify(tasks));
            }

            // Render tasks in the task list
            function renderTaskList() {
                const tasks = loadTasks();
                taskList.innerHTML = "";
                tasks.forEach((task, index) => {
                    const li = document.createElement("li");
                    li.innerHTML = `
                        <strong>${task.name}</strong><br>
                        <small>${task.description || "No description"}</small><br>
                        <small>Deadline: ${task.deadline}</small><br>
                        <button onclick="removeTask(${index})">Remove</button>
                    `;
                    taskList.appendChild(li);
                });
            }

            // Render tasks in the Gantt chart
            function renderGanttChart() {
                const tasks = loadTasks();
                ganttTableBody.innerHTML = "";
                tasks.forEach((task) => {
                    const startDate = new Date();
                    const endDate = new Date(task.deadline);
                    const totalWeeks = Math.ceil((endDate - startDate) / (7 * 24 * 60 * 60 * 1000));

                    const row = document.createElement("tr");
                    row.innerHTML = `
                        <td>${task.name}</td>
                        <td>${startDate.toLocaleDateString()}</td>
                        <td>${endDate.toLocaleDateString()}</td>
                        <td class="timeline"></td>
                    `;
                    const timelineCell = row.querySelector(".timeline");
                    for (let i = 0; i < totalWeeks; i++) {
                        const block = document.createElement("div");
                        block.className = i === totalWeeks - 1 ? "highlight" : "";
                        timelineCell.appendChild(block);
                    }
                    ganttTableBody.appendChild(row);
                });
            }

            // Add a new task
            taskForm.addEventListener("submit", (e) => {
                e.preventDefault();
                const name = document.getElementById("taskName").value;
                const description = document.getElementById("taskDescription").value;
                const deadline = document.getElementById("taskDeadline").value;

                if (!name || !deadline) {
                    alert("Task Name and Deadline are required.");
                    return;
                }

                const tasks = loadTasks();
                tasks.push({ name, description, deadline });
                saveTasks(tasks);

                renderTaskList();
                renderGanttChart();

                taskForm.reset();
            });


            window.removeTask = (index) => {
                const tasks = loadTasks();
                tasks.splice(index, 1);
                saveTasks(tasks);

                renderTaskList();
                renderGanttChart();
            };


            renderTaskList();
            renderGanttChart();



        });

        document.addEventListener("DOMContentLoaded", () => {
            const splitter = document.getElementById("splitter");
            const taskArea = document.getElementById("taskArea");
            const ganttArea = document.getElementById("ganttArea");

            function createSplitter(splitter, panel1, panel2) {
                let isDragging = false;

                splitter.addEventListener("mousedown", () => {
                    isDragging = true;
                    document.body.style.cursor = "col-resize";
                });

                document.addEventListener("mousemove", (e) => {
                    if (!isDragging) return;

                    const appRect = splitter.parentElement.getBoundingClientRect();
                    const splitterWidthWithMargin = splitter.offsetWidth + 20; // Account for splitter margin
                    const newPanel1Width = e.clientX - appRect.left - 10; // Adjust for left margin
                    const newPanel2Width = appRect.right - e.clientX - splitterWidthWithMargin + 10; // Adjust for right margin

                    // Ensure minimum widths
                    if (newPanel1Width > 200 && newPanel2Width > 200) {
                        panel1.style.flex = `0 0 ${newPanel1Width}px`;
                        splitter.style.flex = "0 0 5px"; // Maintain the splitter's width
                        panel2.style.flex = `0 0 ${newPanel2Width}px`;
                    }
                });

                document.addEventListener("mouseup", () => {
                    if (isDragging) {
                        isDragging = false;
                        document.body.style.cursor = "default";
                    }
                });
            }

            createSplitter(splitter, taskArea, ganttArea);
        });


    </script>
    <script type="text/javascript" src="assets/js/logo.js"></script>
</body>

</html>