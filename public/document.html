<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <title>í…ìŠ¤íŠ¸ íƒì§€</title>
  <link href="assets/css/default.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 w-full h-full">
  <div id="cmmContainer"></div>

  <div id="content" class="ml-[110px] pt-24 px-10">
    <nav class="breadcrumb">ë™ì˜ìƒ ë¶„ì„</nav>

    <div>&nbsp;</div>

    <!-- íŒŒì¼ ì—…ë¡œë“œ -->
    <div id="uploadBox"
      class="border-2 border-dashed border-gray-400 rounded-lg p-10 text-center text-gray-500 cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition">
      ğŸ“„ Drag & Drop ë˜ëŠ” í´ë¦­í•˜ì—¬ í…ìŠ¤íŠ¸ íŒŒì¼ ì—…ë¡œë“œ (.txt)
      <input type="file" id="fileInput" accept=".txt" hidden />
    </div>

    <!-- íƒì§€ ê²°ê³¼ -->
    <div id="resultArea" class="mt-8 hidden">
      <!-- AI ìƒì„± ì˜ì‹¬ ë¬¸ì¥ í•˜ì´ë¼ì´íŠ¸ -->
      <h2 class="text-lg font-semibold mb-2">íƒì§€ ê²°ê³¼</h2>
      <div id="highlightedText" class="whitespace-pre-wrap border p-4 rounded bg-white shadow"></div>

      <!-- íŒë³„ ê·¼ê±° ë° ë¹„êµ -->
      <div class="mt-6">
        <h3 class="font-semibold mb-2">íŒë³„ ê·¼ê±° / ë¹„êµ</h3>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 border rounded bg-white shadow">
            <h4 class="font-semibold text-gray-700 mb-2">ì›ë³¸ ë¬¸ì¥</h4>
            <div id="originalText" class="text-sm text-gray-800"></div>
          </div>
          <div class="p-4 border rounded bg-white shadow">
            <h4 class="font-semibold text-gray-700 mb-2">AI ìƒì„± ì˜ì‹¬ ë¶€ë¶„</h4>
            <div id="aiText" class="text-sm text-red-600"></div>
          </div>
        </div>
      </div>

      <!-- ìš”ì•½ -->
      <div class="mt-6">
        <h3 class="font-semibold mb-2">ì „ì²´ ë‚´ìš© ìš”ì•½</h3>
        <div id="summaryBox" class="p-4 border rounded bg-white shadow text-sm text-gray-700"></div>
      </div>
    </div>
  </div>

  <script type="module" src="assets/js/logomodule.js"></script>

  <script>
    const fileInput = document.getElementById("fileInput");
    const uploadBox = document.getElementById("uploadBox");
    const resultArea = document.getElementById("resultArea");
    const highlightedText = document.getElementById("highlightedText");
    const originalText = document.getElementById("originalText");
    const aiText = document.getElementById("aiText");
    const summaryBox = document.getElementById("summaryBox");

    // ì—…ë¡œë“œ ì´ë²¤íŠ¸
    uploadBox.addEventListener("click", () => fileInput.click());
    uploadBox.addEventListener("dragover", (e) => {
      e.preventDefault();
      uploadBox.classList.add("bg-blue-50", "border-blue-500");
    });
    uploadBox.addEventListener("dragleave", () => {
      uploadBox.classList.remove("bg-blue-50", "border-blue-500");
    });
    uploadBox.addEventListener("drop", (e) => {
      e.preventDefault();
      uploadBox.classList.remove("bg-blue-50", "border-blue-500");
      handleFile(e.dataTransfer.files[0]);
    });
    fileInput.addEventListener("change", (e) => handleFile(e.target.files[0]));

    // íŒŒì¼ ì²˜ë¦¬ í•¨ìˆ˜
    function handleFile(file) {
      if (!file) return;
      const reader = new FileReader();
      reader.onload = (e) => {
        const text = e.target.result;

        // ğŸ”¹ ì‹¤ì œë¡œëŠ” ì„œë²„ë¡œ ë³´ë‚´ê³  AI íƒì§€ ê²°ê³¼ë¥¼ ë°›ì•„ì™€ì•¼ í•¨
        // ì—¬ê¸°ì„œëŠ” Mock ë°ì´í„° ìƒì„±
        const suspiciousSentence = "ì´ ë¬¸ì¥ì€ AIê°€ ìƒì„±í–ˆì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.";
        const summary = "ì´ í…ìŠ¤íŠ¸ëŠ” AIì™€ ì‚¬ëŒì´ í˜¼í•©í•˜ì—¬ ì‘ì„±í•œ ê²ƒìœ¼ë¡œ ë³´ì´ë©°, íŠ¹ì • ë¶€ë¶„ì—ì„œ ë°˜ë³µì ì´ê³  ë¶€ìì—°ìŠ¤ëŸ¬ìš´ í‘œí˜„ì´ íƒì§€ë˜ì—ˆìŠµë‹ˆë‹¤.";

        // ê²°ê³¼ ì˜ì—­ í‘œì‹œ
        resultArea.classList.remove("hidden");

        // ì›ë¬¸ ì „ì²´ + í•˜ì´ë¼ì´íŠ¸ í‘œì‹œ
        highlightedText.innerHTML = text.replace(
          suspiciousSentence,
          `<mark class="bg-red-200">${suspiciousSentence}</mark>`
        );

        // ë¹„êµ BOX
        originalText.textContent = text;
        aiText.textContent = suspiciousSentence;

        // ìš”ì•½
        summaryBox.textContent = summary;
      };
      reader.readAsText(file);
    }
  </script>
</body>
</html>
